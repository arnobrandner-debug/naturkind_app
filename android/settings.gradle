// 1) Flutter-Loader & Plugin-Management (Groovy)
pluginManagement {
  // Flutter SDK-Pfad aus local.properties lesen
  def props = new Properties()
  def propsFile = new File(rootDir, "local.properties")
  if (propsFile.exists()) { propsFile.withInputStream { props.load(it) } }
  def flutterSdk = props.getProperty("flutter.sdk")
  if (flutterSdk == null) throw new IllegalStateException("Flutter SDK nicht gefunden. Setze 'flutter.sdk' in android/local.properties")

  includeBuild("${flutterSdk}/packages/flutter_tools/gradle")

  repositories {
    google()
    mavenCentral()
    gradlePluginPortal()
  }

  plugins {
    id "com.android.application" version "8.7.1" apply false
    id "org.jetbrains.kotlin.android" version "2.1.0" apply false
    id "com.google.gms.google-services" version "4.4.2" apply false
    id "dev.flutter.flutter-plugin-loader" version "1.0.0"
  }
}

dependencyResolutionManagement {
  repositoriesMode.set(RepositoriesMode.PREFER_SETTINGS)
  repositories {
    google()
    mavenCentral()
    gradlePluginPortal()
    maven { url = uri("https://storage.googleapis.com/download.flutter.io") }
  }
}

plugins {
  id "dev.flutter.flutter-plugin-loader"
}

rootProject.name = "naturkind_app"
include ":app"
